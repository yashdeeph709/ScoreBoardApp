var app=angular.module('ScoreBoardApp');
app.factory('championship',function($http,$resource){
	return{
	"ChampionShip_Name":"IPL",
	"organizer":"",
	"description":"",
	"overs":"10",
	"config":[],
	"players":"12",
	"teams":[],
	"pointstable":[],
	"matchlist":[],
	setChampionship:function(name,organizer,desc,overs,players,noob,wide,overstrike){
		this.ChampionShip_Name=name;
		this.overs=overs;
		this.players=players;
		this.config[0]=noob;
		this.config[1]=wide;
	 	this.config[2]=overstrike;	
	 	this.organizer=organizer;
	 	this.description=desc;
	 	$http.post('api/championship',{
	 		"chamname":this.ChampionShip_Name,
	 		"overs":this.overs,
	 		"players":this.players,
	 		"config":this.config,
	 		"organizer":this.organizer,
	 		"description":this.description
	 	});
	},
	addPlayer:function(id,name,skills,position){
		this.teams[id-1].players.push({"id":this.teams[id-1].players.length+1,"name":name,"skills":skills,"position":position});
		$http.post('api/addPlayer',{
			"chamid":"",
			"teamID":id-1,
			"name":"",
			"skills":"",
			"position":""
		});
	},
	addTeam:function(teamname){
		this.teams.push({"id":this.teams.length+1,"teamname":teamname,"players":[]});
		$http.post('api/addTeam',{
	 			"id":this.teams.length,
	 			"teamname":teamname,
	 			"players":[]
	 	});
	},
	getTeams:function(){
		console.log(this.teams);
		return this.teams;
	},
	getPlayers:function(id){
		return this.teams[id-1].players;
	},
	getChampionships:function(){
		return $resource('api/championship',{},{query:{method:'GET',isArray:true}}).query();
	}
	}
});